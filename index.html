<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SFLventory</title>
    <!-- Site icons (single source) -->
    <link rel="icon" type="image/png" href="images/sunflower-icon.png">
    <link rel="apple-touch-icon" href="images/sunflower-icon.png">
    <meta name="theme-color" content="#4caf50">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:; font-src 'self'; connect-src 'self' https://*.s3.eu-west-3.amazonaws.com">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <h1>Sumac's Farm</h1>
        <div class="header-controls">
            <button id="theme-toggle" title="Toggle dark mode">üåô</button>
            <span id="season-display" title="Current season"></span>
            <select id="period">
                <option value="7">7d</option>
                <option value="30" selected>1m</option>
                <option value="90">3m</option>
                <option value="180">6m</option>
                <option value="270">9m</option>
                <option value="365">1y</option>
                <option value="custom">Custom‚Ä¶</option>
            </select>
            <div id="custom-range" class="custom-range" style="display:none">
                <input type="date" id="start-date" />
                <span aria-hidden="true">‚Üí</span>
                <input type="date" id="end-date" />
                <button id="apply-range" title="Appliquer la p√©riode">OK</button>
            </div>
        </div>
    </header>

    <aside id="sidebar">
        <input type="text" id="search" placeholder="Search items...">
        <div id="items"></div>
        
        <div class="custom-path-section">
            <h3>Custom Path</h3>
            <input type="text" id="custom-path-input" placeholder="e.g., farm.pets.nfts.*.experience">
            <button id="custom-path-load">Load</button>
            <div id="custom-path-results" class="custom-results"></div>
        </div>
    </aside>
    <main id="chart">
        <div id="loader" class="loader">
            <div class="loader-bar"></div>
            <div class="loader-text">Loading data...</div>
        </div>
        <div class="chart-wrapper">
            <div id="svg-container"></div>
            <div id="legend"></div>
        </div>
    </main>
    <aside id="flowers-sidebar">
        <div class="right-tabs" role="tablist" aria-label="Right sidebar tabs">
            <button class="right-tab active" role="tab" aria-selected="true" aria-controls="panel-flowers" data-tab="flowers" aria-label="Flowers">üå∏</button>
            <button class="right-tab" role="tab" aria-selected="false" aria-controls="panel-fishing" data-tab="fishing" aria-label="Fishing">üé£</button>
            <button class="right-tab" role="tab" aria-selected="false" aria-controls="panel-food" data-tab="food" aria-label="Food">üç≥</button>
        </div>
        <div class="right-panels">
            <section id="panel-flowers" class="right-panel active" role="tabpanel">
                <h2>Low Stock Flowers</h2>
                <div id="flowers-list"></div>
            </section>
            <section id="panel-fishing" class="right-panel" role="tabpanel">
                <h2>Low Stock Fish</h2>
                <div id="fishing-list"></div>
            </section>
            <section id="panel-food" class="right-panel" role="tabpanel">
                <h2>Cooking</h2>
                <div id="food-list"></div>
            </section>
        </div>
    </aside>

    <!-- Module-based scripts in dependency order -->
    <script src="js/constants.js"></script>
    <script src="js/storage.js"></script>
    <script src="js/flowers.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/customPaths.js"></script>
    <script src="js/fishing.js"></script>
    <script src="js/food.js"></script>
    <script src="js/chart.js"></script>
    <script src="app.js"></script>
</body>
</html>